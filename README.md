<div align="center">

# Amigo

**ä¸‹ä¸€ä»£ AI æ™ºèƒ½ä½“åä½œå¹³å°**

ä¸€ä¸ªä¼ä¸šçº§çš„ WebSocket é©±åŠ¨çš„ AI æ™ºèƒ½ä½“ç³»ç»Ÿï¼Œé€šè¿‡å±‚çº§åŒ–ä»»åŠ¡å§”æ´¾å’Œå®æ—¶æµå¼å“åº”ï¼Œé‡æ–°å®šä¹‰äººæœºåä½œæ–¹å¼ã€‚

[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue.svg)](https://www.typescriptlang.org/)
[![React](https://img.shields.io/badge/React-18.x-61dafb.svg)](https://reactjs.org/)
[![Bun](https://img.shields.io/badge/Bun-1.x-f9f1e1.svg)](https://bun.sh/)
[![License](https://img.shields.io/badge/license-ISC-green.svg)](LICENSE)

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡) â€¢ [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯) â€¢ [æ–‡æ¡£](#æ–‡æ¡£)

</div>

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

Amigo æ˜¯ä¸€ä¸ªä¸“ä¸ºå¤æ‚å·¥ä½œæµè®¾è®¡çš„ AI æ™ºèƒ½ä½“ç¼–æ’ç³»ç»Ÿã€‚ä¸åŒäºä¼ ç»Ÿçš„å•ä¸€å¯¹è¯å¼ AIï¼ŒAmigo é€šè¿‡**å±‚çº§åŒ–ä»»åŠ¡å§”æ´¾**å’Œ**å¤šæ™ºèƒ½ä½“åä½œ**æœºåˆ¶ï¼Œè®© AI èƒ½å¤Ÿåƒå›¢é˜Ÿä¸€æ ·å·¥ä½œâ€”â€”ä¸»æ™ºèƒ½ä½“è´Ÿè´£è§„åˆ’å’Œåè°ƒï¼Œå­æ™ºèƒ½ä½“å¹¶è¡Œæ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼Œæœ€ç»ˆæ±‡æ€»ç»“æœå®Œæˆå¤æ‚ç›®æ ‡ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹© Amigoï¼Ÿ

- **ğŸš€ çœŸæ­£çš„æµå¼ä½“éªŒ** - åŸºäº WebSocket çš„åŒå‘é€šä¿¡ï¼Œå®æ—¶å±•ç¤º AI æ€è€ƒè¿‡ç¨‹ï¼Œæ— éœ€ç­‰å¾…å®Œæ•´å“åº”
- **ğŸ§  æ™ºèƒ½ä»»åŠ¡åˆ†è§£** - è‡ªåŠ¨å°†å¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºå¯ç®¡ç†çš„å­ä»»åŠ¡ï¼Œå¹¶åˆ†é…ç»™ä¸“é—¨çš„å­æ™ºèƒ½ä½“å¤„ç†
- **ğŸ”„ åŠ¨æ€å·¥ä½œæµ** - æ™ºèƒ½ä½“å¯ä»¥æ ¹æ®æ‰§è¡Œç»“æœåŠ¨æ€è°ƒæ•´ç­–ç•¥ï¼Œæ”¯æŒä¸­æ–­ã€æ¢å¤å’Œé‡è¯•
- **ğŸ› ï¸ é«˜åº¦å¯æ‰©å±•** - åŸºäºå·¥å…·ç³»ç»Ÿçš„æ’ä»¶åŒ–æ¶æ„ï¼Œè½»æ¾æ·»åŠ è‡ªå®šä¹‰èƒ½åŠ›ï¼ˆæœç´¢ã€ä»£ç æ‰§è¡Œã€API è°ƒç”¨ç­‰ï¼‰
- **ğŸ’¾ å®Œæ•´çš„ä¸Šä¸‹æ–‡ç®¡ç†** - æŒä¹…åŒ–å¯¹è¯å†å²å’Œä»»åŠ¡çŠ¶æ€ï¼Œæ”¯æŒé•¿æœŸè®°å¿†å’Œä¼šè¯æ¢å¤
- **âš¡ æè‡´æ€§èƒ½** - é‡‡ç”¨ Bun è¿è¡Œæ—¶å’Œ Vite æ„å»ºï¼Œå¯åŠ¨é€Ÿåº¦å’Œè¿è¡Œæ•ˆç‡è¿œè¶…ä¼ ç»Ÿæ–¹æ¡ˆ

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒèƒ½åŠ›

| ç‰¹æ€§ | è¯´æ˜ | ä¼˜åŠ¿ |
|------|------|------|
| **å®æ—¶åŒå‘é€šä¿¡** | WebSocket é•¿è¿æ¥ + æµå¼å“åº” | æ¯«ç§’çº§å»¶è¿Ÿï¼Œå³æ—¶åé¦ˆ AI æ€è€ƒè¿‡ç¨‹ |
| **å±‚çº§ä»»åŠ¡ç®¡ç†** | çˆ¶å­ä»»åŠ¡æ ‘å½¢ç»“æ„ | æ¸…æ™°çš„ä»»åŠ¡ä¾èµ–å…³ç³»ï¼Œæ”¯æŒå¹¶è¡Œæ‰§è¡Œ |
| **å¤šæ™ºèƒ½ä½“åä½œ** | ä¸»æ™ºèƒ½ä½“ + åŠ¨æ€å­æ™ºèƒ½ä½“ | ä¸“ä¸šåˆ†å·¥ï¼Œæé«˜å¤æ‚ä»»åŠ¡å®Œæˆè´¨é‡ |
| **å·¥å…·ç”Ÿæ€ç³»ç»Ÿ** | å¯æ’æ‹”çš„å·¥å…·æ³¨å†Œæœºåˆ¶ | å¿«é€Ÿæ‰©å±• AI èƒ½åŠ›è¾¹ç•Œ |
| **æŒä¹…åŒ–å­˜å‚¨** | åŸºäºæ–‡ä»¶çš„å¯¹è¯å†å² | é›¶é…ç½®ï¼Œæ”¯æŒä¼šè¯æ¢å¤å’Œå®¡è®¡ |
| **ä¸­æ–­ä¸æ¢å¤** | ä»»åŠ¡çº§åˆ«çš„æš‚åœ/ç»§ç»­ | ç”¨æˆ·å¯éšæ—¶ä»‹å…¥ï¼Œå¼•å¯¼ AI æ–¹å‘ |

### å†…ç½®å·¥å…·

- ğŸ” **æµè§ˆå™¨æœç´¢** - å®æ—¶ç½‘ç»œä¿¡æ¯æ£€ç´¢
- ğŸ“ **ä»»åŠ¡åˆ†é…** - æ™ºèƒ½ä»»åŠ¡æ‹†è§£ä¸å§”æ´¾
- ğŸ’­ **æ€è€ƒé“¾** - å¯è§†åŒ– AI æ¨ç†è¿‡ç¨‹
- âœ… **å¾…åŠæ¸…å•** - ç»“æ„åŒ–ä»»åŠ¡è·Ÿè¸ª
- ğŸ¯ **å®ŒæˆæŠ¥å‘Š** - è‡ªåŠ¨ç”Ÿæˆæ‰§è¡Œæ‘˜è¦

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

Amigo é‡‡ç”¨ç°ä»£åŒ–çš„å…¨æ ˆæŠ€æœ¯æ–¹æ¡ˆï¼Œæ³¨é‡æ€§èƒ½ã€å¼€å‘ä½“éªŒå’Œå¯ç»´æŠ¤æ€§ã€‚

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **React** | 18.x | å£°æ˜å¼ UI æ¡†æ¶ï¼Œç»„ä»¶åŒ–å¼€å‘ |
| **TypeScript** | 5.x | ç±»å‹å®‰å…¨ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯ |
| **Vite** | 6.x | æé€Ÿå†·å¯åŠ¨å’Œçƒ­æ›´æ–° |
| **Tailwind CSS** | 4.x | åŸå­åŒ– CSSï¼Œå¿«é€Ÿæ„å»ºç•Œé¢ |
| **DaisyUI** | - | é¢„è®¾ç»„ä»¶åº“ï¼Œç»Ÿä¸€è®¾è®¡è¯­è¨€ |
| **Zustand** | - | è½»é‡çº§çŠ¶æ€ç®¡ç†ï¼Œé›¶æ ·æ¿ä»£ç  |
| **Lucide React** | - | ç°ä»£åŒ–å›¾æ ‡åº“ |

### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Bun** | 1.x | é«˜æ€§èƒ½ JavaScript è¿è¡Œæ—¶ï¼ˆæ¯” Node.js å¿« 3-4 å€ï¼‰ |
| **LangChain** | - | LLM åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œç®€åŒ– AI é›†æˆ |
| **LangGraph** | - | çŠ¶æ€æœºç¼–æ’ï¼Œæ„å»ºå¤æ‚ AI å·¥ä½œæµ |
| **Zod** | - | è¿è¡Œæ—¶ç±»å‹éªŒè¯ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ |
| **fast-xml-parser** | - | é«˜æ€§èƒ½ XML è§£æï¼Œå¤„ç†å·¥å…·è°ƒç”¨ |

### å·¥ç¨‹åŒ–

- **pnpm Workspace** - Monorepo ç®¡ç†ï¼Œå…±äº«ä¾èµ–ï¼ŒåŠ é€Ÿå®‰è£…
- **Biome** - ç»Ÿä¸€çš„ä»£ç æ ¼å¼åŒ–å’Œ Lint å·¥å…·ï¼ˆæ¯” ESLint + Prettier å¿« 25 å€ï¼‰
- **TypeScript Strict Mode** - æœ€ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥ï¼Œæå‰å‘ç°é—®é¢˜
- **Path Aliases** - `@/*` è·¯å¾„æ˜ å°„ï¼Œæ¸…æ™°çš„æ¨¡å—å¯¼å…¥

## é¡¹ç›®ç»“æ„

```
packages/
â”œâ”€â”€ frontend/          # React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ messages/        # æ¶ˆæ¯å¤„ç†é€»è¾‘
â”‚   â”‚   â””â”€â”€ store/           # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/            # Bun åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ core/            # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ conversationManager/  # å¯¹è¯ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ memory/               # æŒä¹…åŒ–å­˜å‚¨
â”‚   â”‚   â”‚   â”œâ”€â”€ tools/                # æ™ºèƒ½ä½“å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ systemPrompt/         # ç³»ç»Ÿæç¤ºè¯
â”‚   â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ package.json
â””â”€â”€ types/             # å…±äº«ç±»å‹å®šä¹‰
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ conversation/    # å¯¹è¯ç±»å‹
    â”‚   â”œâ”€â”€ tool/            # å·¥å…·å‚æ•°ç±»å‹
    â”‚   â””â”€â”€ websocketMessage/ # WebSocket æ¶ˆæ¯æ¨¡å¼
    â””â”€â”€ package.json
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

```bash
Node.js  >= 18.0.0
pnpm     >= 10.0.0
Bun      >= 1.0.0
```

### ä¸€é”®å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/amigo.git
cd amigo

# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆMonorepo è‡ªåŠ¨å¤„ç†ï¼‰
pnpm install
```

### é…ç½®ç¯å¢ƒ

åœ¨ `packages/server/` ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# LLM é…ç½®ï¼ˆå¿…å¡«ï¼‰
OPENAI_API_KEY=your_openai_api_key
OPENAI_BASE_URL=https://api.openai.com/v1  # å¯é€‰ï¼Œè‡ªå®šä¹‰ API ç«¯ç‚¹

# æœåŠ¡å™¨é…ç½®ï¼ˆå¯é€‰ï¼‰
PORT=10013                    # WebSocket æœåŠ¡ç«¯å£
STORAGE_PATH=./storage        # å¯¹è¯å†å²å­˜å‚¨è·¯å¾„

# æ—¥å¿—é…ç½®ï¼ˆå¯é€‰ï¼‰
LOG_LEVEL=info                # debug | info | warn | error
```

### å¯åŠ¨æœåŠ¡

```bash
# æ–¹å¼ 1: åŒæ—¶å¯åŠ¨å‰åç«¯ï¼ˆæ¨èï¼‰
pnpm dev

# æ–¹å¼ 2: åˆ†åˆ«å¯åŠ¨
pnpm --filter frontend start  # å‰ç«¯: http://localhost:5173
pnpm --filter server start    # åç«¯: ws://localhost:10013
```

è®¿é—® `http://localhost:5173` å³å¯å¼€å§‹ä½¿ç”¨ï¼

### ç”Ÿäº§æ„å»º

```bash
# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# æˆ–åˆ†åˆ«æ„å»º
pnpm --filter types build      # å…ˆæ„å»ºç±»å‹åŒ…ï¼ˆå…¶ä»–åŒ…ä¾èµ–å®ƒï¼‰
pnpm --filter frontend build   # æ„å»ºå‰ç«¯é™æ€èµ„æº
```

æ„å»ºäº§ç‰©ï¼š
- å‰ç«¯: `packages/frontend/dist/`
- ç±»å‹: `packages/types/dist/`

## ğŸ¨ ä½¿ç”¨åœºæ™¯

Amigo é€‚ç”¨äºéœ€è¦ AI æ·±åº¦å‚ä¸çš„å¤æ‚å·¥ä½œæµåœºæ™¯ï¼š

### å…¸å‹åº”ç”¨

| åœºæ™¯ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **ç ”ç©¶åŠ©æ‰‹** | å¤šæºä¿¡æ¯æ£€ç´¢ä¸ç»¼åˆåˆ†æ | "åˆ†ææœ€è¿‘ä¸‰ä¸ªæœˆ AI é¢†åŸŸçš„é‡è¦è¿›å±•" |
| **é¡¹ç›®ç®¡ç†** | ä»»åŠ¡æ‹†è§£ã€åˆ†é…ä¸è¿›åº¦è·Ÿè¸ª | "åˆ¶å®šæ–°åŠŸèƒ½çš„å¼€å‘è®¡åˆ’å¹¶åˆ†é…ä»»åŠ¡" |
| **å†…å®¹åˆ›ä½œ** | å¤šæ­¥éª¤å†…å®¹ç”Ÿæˆä¸ä¼˜åŒ– | "å†™ä¸€ç¯‡æŠ€æœ¯åšå®¢ï¼ŒåŒ…å«è°ƒç ”ã€å¤§çº²ã€æ­£æ–‡" |
| **æ•°æ®åˆ†æ** | æ•°æ®è·å–ã€å¤„ç†ã€å¯è§†åŒ– | "åˆ†æç”¨æˆ·è¡Œä¸ºæ•°æ®å¹¶ç”ŸæˆæŠ¥å‘Š" |
| **è‡ªåŠ¨åŒ–è¿ç»´** | ç³»ç»Ÿç›‘æ§ã€é—®é¢˜è¯Šæ–­ã€ä¿®å¤ | "æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€å¹¶ä¿®å¤å¼‚å¸¸" |

### ä¸ä¼ ç»Ÿ AI å¯¹è¯çš„åŒºåˆ«

| ç»´åº¦ | ä¼ ç»Ÿ AI å¯¹è¯ | Amigo |
|------|-------------|-------|
| **ä»»åŠ¡å¤æ‚åº¦** | å•è½®é—®ç­” | å¤šæ­¥éª¤å·¥ä½œæµ |
| **æ‰§è¡Œæ–¹å¼** | ä¸€æ¬¡æ€§å“åº” | æµå¼ + å¹¶è¡Œæ‰§è¡Œ |
| **ä¸Šä¸‹æ–‡ç®¡ç†** | æœ‰é™çš„å¯¹è¯å†å² | å®Œæ•´çš„ä»»åŠ¡æ ‘å’ŒçŠ¶æ€ |
| **å¯æ§æ€§** | è¢«åŠ¨æ¥å—ç»“æœ | å¯ä¸­æ–­ã€å¼•å¯¼ã€æ¢å¤ |
| **æ‰©å±•æ€§** | ä¾èµ–æ¨¡å‹èƒ½åŠ› | å·¥å…·ç³»ç»Ÿæ— é™æ‰©å±• |

## ğŸ›ï¸ æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend (React)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ChatWindow   â”‚  â”‚ TaskRenderer â”‚  â”‚ MessageInput â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                  â”‚                  â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                            â”‚                                 â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                   â”‚  WebSocket      â”‚                        â”‚
â”‚                   â”‚  Provider       â”‚                        â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ WebSocket (ws://localhost:10013)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend (Bun)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              WebSocket Server                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Message         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Conversation     â”‚           â”‚
â”‚  â”‚ Resolver        â”‚         â”‚ Manager          â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                        â”‚                     â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚           â”‚                            â”‚              â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚
â”‚  â”‚ LLM Stream      â”‚      â”‚ Tool Executor    â”‚  â”‚ Memory â”‚ â”‚
â”‚  â”‚ Handler         â”‚      â”‚ (Sub-agents)     â”‚  â”‚ Store  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæµç¨‹

#### 1. æ¶ˆæ¯å¤„ç†æµç¨‹

```
ç”¨æˆ·è¾“å…¥ â†’ WebSocket â†’ MessageResolver â†’ ConversationManager
                                              â†“
                                         LLM Stream
                                              â†“
                                    XML Parser (å·¥å…·è°ƒç”¨)
                                              â†“
                                       Tool Executor
                                              â†“
                                    ç»“æœè¿”å› â†’ å‰ç«¯æ¸²æŸ“
                                              â†“
                                      Memory æŒä¹…åŒ–
```

#### 2. ä»»åŠ¡å§”æ´¾æµç¨‹

```
ä¸»æ™ºèƒ½ä½“æ¥æ”¶ä»»åŠ¡
    â†“
åˆ†æå¹¶æ‹†è§£ä¸ºå­ä»»åŠ¡
    â†“
ä¸ºæ¯ä¸ªå­ä»»åŠ¡åˆ›å»º ConversationManager
    â†“
å¹¶è¡Œæ‰§è¡Œå­ä»»åŠ¡ï¼ˆç‹¬ç«‹çš„ LLM ä¼šè¯ï¼‰
    â†“
æ”¶é›†å­ä»»åŠ¡ç»“æœ
    â†“
ä¸»æ™ºèƒ½ä½“æ±‡æ€»å¹¶è¿”å›æœ€ç»ˆç»“æœ
```

### å…³é”®è®¾è®¡å†³ç­–

#### ä¸ºä»€ä¹ˆé€‰æ‹© WebSocketï¼Ÿ

- **å®æ—¶æ€§**: æ¯«ç§’çº§åŒå‘é€šä¿¡ï¼Œæ— éœ€è½®è¯¢
- **æµå¼ä¼ è¾“**: æ”¯æŒ Server-Sent Events é£æ ¼çš„æµå¼å“åº”
- **è¿æ¥å¤ç”¨**: ä¸€ä¸ªè¿æ¥å¤„ç†æ‰€æœ‰æ¶ˆæ¯ï¼Œå‡å°‘å¼€é”€
- **çŠ¶æ€ä¿æŒ**: å¤©ç„¶æ”¯æŒä¼šè¯çº§åˆ«çš„çŠ¶æ€ç®¡ç†

#### ä¸ºä»€ä¹ˆé€‰æ‹© Bunï¼Ÿ

- **æ€§èƒ½**: å¯åŠ¨é€Ÿåº¦æ¯” Node.js å¿« 4 å€ï¼Œå†…å­˜å ç”¨æ›´ä½
- **åŸç”Ÿ WebSocket**: æ— éœ€ç¬¬ä¸‰æ–¹åº“ï¼ŒAPI æ›´ç®€æ´
- **TypeScript åŸç”Ÿæ”¯æŒ**: æ— éœ€ç¼–è¯‘æ­¥éª¤ï¼Œå¼€å‘ä½“éªŒæ›´å¥½
- **å…¼å®¹æ€§**: å®Œå…¨å…¼å®¹ Node.js APIï¼Œè¿ç§»æˆæœ¬ä½

#### ä¸ºä»€ä¹ˆä½¿ç”¨ XML æ ¼å¼çš„å·¥å…·è°ƒç”¨ï¼Ÿ

- **æµå¼å‹å¥½**: å¯ä»¥è¾¹è§£æè¾¹æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…å®Œæ•´ JSON
- **å®¹é”™æ€§å¼º**: éƒ¨åˆ†æŸåçš„ XML ä»å¯è§£æ
- **LLM å‹å¥½**: å¤§æ¨¡å‹ç”Ÿæˆ XML çš„å‡†ç¡®ç‡é«˜äºå¤æ‚ JSON
- **å¯è¯»æ€§**: äººç±»å’Œæœºå™¨éƒ½æ˜“äºç†è§£

## å¼€å‘æŒ‡å—

### è·¯å¾„åˆ«å

ä½¿ç”¨ `@/*` å¯¼å…¥ç›¸å¯¹äº `src/` ç›®å½•çš„æ–‡ä»¶ï¼š

```typescript
import { logger } from "@/utils/logger"
```

### ä»£ç è§„èŒƒ

```bash
# ä½¿ç”¨ Biome æ ¼å¼åŒ–å’Œæ£€æŸ¥ä»£ç 
biome check --write .
```

### å‘½åçº¦å®š

- ç»„ä»¶: PascalCase (ä¾‹å¦‚: `ChatWindow.tsx`)
- å·¥å…·å‡½æ•°: camelCase (ä¾‹å¦‚: `parseStreamingXml.ts`)
- ç±»å‹: PascalCase æ¥å£/ç±»å‹
- æ–‡ä»¶: ä¸ä¸»è¦å¯¼å‡ºåç§°åŒ¹é…

## å­˜å‚¨

å¯¹è¯æ•°æ®æŒä¹…åŒ–åœ¨ `packages/server/storage/` ç›®å½•ã€‚

## è®¸å¯è¯

ISC

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼


## ğŸ“¦ Server SDK

Amigo Server æä¾›äº†ä¸€å¥—æµå¼æ„å»ºå™¨ APIï¼Œè®©ä½ å¯ä»¥è½»æ¾é…ç½®å’Œæ‰©å±•æœåŠ¡å™¨åŠŸèƒ½ã€‚

### å¿«é€Ÿå¼€å§‹

```typescript
import { AmigoServerBuilder } from "@amigo/server";

const server = new AmigoServerBuilder()
  .port(8080)
  .storagePath("./my-storage")
  .build();

server.init();
```

### æ ¸å¿ƒ API

#### AmigoServerBuilder

æµå¼æ„å»ºå™¨ï¼Œç”¨äºé…ç½®æœåŠ¡å™¨å®ä¾‹ã€‚

```typescript
import { AmigoServerBuilder } from "@amigo/server";

const server = new AmigoServerBuilder()
  // è®¾ç½®æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤ 10013ï¼‰
  .port(8080)
  
  // è®¾ç½®ä¼šè¯æŒä¹…åŒ–å­˜å‚¨è·¯å¾„ï¼ˆé»˜è®¤ ./storageï¼‰
  .storagePath("./data")
  
  // æ³¨å†Œè‡ªå®šä¹‰å·¥å…·
  .registerTool(myCustomTool)
  
  // æ³¨å†Œè‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹
  .registerMessage(myCustomMessage)
  
  // æ„å»ºæœåŠ¡å™¨å®ä¾‹
  .build();

// å¯åŠ¨æœåŠ¡å™¨
server.init();
```

#### ServerConfig

æœåŠ¡å™¨é…ç½® Schemaï¼Œä½¿ç”¨ Zod è¿›è¡ŒéªŒè¯ã€‚

```typescript
import { ServerConfigSchema, type ServerConfig } from "@amigo/server";

// é…ç½®é¡¹
interface ServerConfig {
  port: number;              // ç«¯å£å· (1-65535)ï¼Œé»˜è®¤ 10013
  storagePath: string;       // å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤ "./storage"
  maxConnections?: number;   // æœ€å¤§è¿æ¥æ•°ï¼ˆå¯é€‰ï¼‰
  heartbeatInterval?: number; // å¿ƒè·³é—´éš”ï¼ˆå¯é€‰ï¼‰
}

// éªŒè¯é…ç½®
const config = ServerConfigSchema.parse({
  port: 8080,
  storagePath: "./my-storage"
});
```

### è‡ªå®šä¹‰å·¥å…·

å·¥å…·æ˜¯ Amigo çš„æ ¸å¿ƒæ‰©å±•æœºåˆ¶ï¼Œè®© AI æ™ºèƒ½ä½“èƒ½å¤Ÿæ‰§è¡Œå…·ä½“æ“ä½œã€‚

#### å·¥å…·æ¥å£å®šä¹‰

```typescript
interface ToolInterface<K extends ToolNames> {
  name: K;                    // å·¥å…·åç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
  description: string;        // å·¥å…·æè¿°ï¼ˆLLM ç”¨äºç†è§£å·¥å…·ç”¨é€”ï¼‰
  whenToUse: string;          // ä½¿ç”¨åœºæ™¯è¯´æ˜
  params: ToolParam<K>[];     // å‚æ•°å®šä¹‰
  useExamples: string[];      // ä½¿ç”¨ç¤ºä¾‹ï¼ˆXML æ ¼å¼ï¼‰
  
  invoke: (props: {
    params: ToolParams<K>;                              // è§£æåçš„å‚æ•°
    getCurrentTask: () => string;                       // è·å–å½“å‰ä»»åŠ¡ ID
    getToolFromName: (name: string) => ToolInterface;   // è·å–å…¶ä»–å·¥å…·
    signal?: AbortSignal;                               // ä¸­æ–­ä¿¡å·
    postMessage?: (msg: string | object) => void;       // å‘é€æ¶ˆæ¯
  }) => Promise<{ message: string; toolResult: ToolResult<K> }>;
}
```

#### åˆ›å»ºè‡ªå®šä¹‰å·¥å…·

**æ­¥éª¤ 1: å®šä¹‰å·¥å…· Schema** (`packages/types/src/tool/myTool.ts`)

```typescript
import { z } from "zod";

export const MyToolSchema = z.object({
  name: z.literal("myTool"),
  params: z.object({
    query: z.string(),
    options: z.object({
      limit: z.number().optional(),
    }).optional(),
  }),
  result: z.object({
    data: z.array(z.string()),
    total: z.number(),
  }),
});

export type MyToolParams = z.infer<typeof MyToolSchema>["params"];
export type MyToolResult = z.infer<typeof MyToolSchema>["result"];
```

**æ­¥éª¤ 2: å®ç°å·¥å…·é€»è¾‘** (`packages/server/src/core/tools/myTool.ts`)

```typescript
import { createTool } from "./base";
import { logger } from "@/utils/logger";

export const MyTool = createTool({
  name: "myTool",
  description: "æ‰§è¡Œè‡ªå®šä¹‰æŸ¥è¯¢æ“ä½œ",
  whenToUse: "å½“ç”¨æˆ·éœ€è¦æŸ¥è¯¢ç‰¹å®šæ•°æ®æ—¶ä½¿ç”¨æ­¤å·¥å…·",
  
  params: [
    {
      name: "query",
      optional: false,
      description: "æŸ¥è¯¢å…³é”®è¯",
    },
    {
      name: "options",
      optional: true,
      description: "æŸ¥è¯¢é€‰é¡¹",
      type: "object",
      params: [
        {
          name: "limit",
          optional: true,
          description: "è¿”å›ç»“æœæ•°é‡é™åˆ¶",
        },
      ],
    },
  ],
  
  useExamples: [
    `<myTool>
  <query>æœç´¢å…³é”®è¯</query>
  <options>
    <limit>10</limit>
  </options>
</myTool>`,
  ],
  
  async invoke({ params, signal, postMessage }) {
    const { query, options } = params;
    
    logger.info(`[MyTool] æ‰§è¡ŒæŸ¥è¯¢: ${query}`);
    
    // æ£€æŸ¥ä¸­æ–­ä¿¡å·
    if (signal?.aborted) {
      throw new Error("æ“ä½œå·²å–æ¶ˆ");
    }
    
    // å‘é€è¿›åº¦æ¶ˆæ¯ï¼ˆå¯é€‰ï¼‰
    postMessage?.({ type: "progress", data: { status: "processing" } });
    
    // æ‰§è¡Œä¸šåŠ¡é€»è¾‘
    const results = await performQuery(query, options?.limit);
    
    return {
      message: `æŸ¥è¯¢å®Œæˆï¼Œæ‰¾åˆ° ${results.length} æ¡ç»“æœ`,
      toolResult: {
        data: results,
        total: results.length,
      },
    };
  },
});
```

**æ­¥éª¤ 3: æ³¨å†Œå·¥å…·åˆ° Schema** (`packages/types/src/tool/index.ts`)

```typescript
import { MyToolSchema } from "./myTool";

export const toolSchemas = z.discriminatedUnion("name", [
  // ... å…¶ä»–å·¥å…·
  MyToolSchema,
]);
```

**æ­¥éª¤ 4: é€šè¿‡ Builder æ³¨å†Œ**

```typescript
import { AmigoServerBuilder } from "@amigo/server";
import { MyTool } from "./tools/myTool";

const server = new AmigoServerBuilder()
  .port(8080)
  .registerTool(MyTool)
  .build();
```

### è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹

æ¶ˆæ¯ç±»å‹ç”¨äºå®šä¹‰æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„é€šä¿¡åè®®ã€‚

#### å®šä¹‰æ¶ˆæ¯

```typescript
import { defineMessage } from "@amigo/server";
import { z } from "zod";

// å®šä¹‰è‡ªå®šä¹‰æ¶ˆæ¯
const MyCustomMessage = defineMessage({
  type: "myCustomEvent",
  dataSchema: z.object({
    eventId: z.string(),
    payload: z.any(),
    timestamp: z.number(),
  }),
  // å¯é€‰ï¼šæ¶ˆæ¯å¤„ç†å™¨
  handler: async (data) => {
    console.log("æ”¶åˆ°è‡ªå®šä¹‰æ¶ˆæ¯:", data);
  },
});
```

#### æ³¨å†Œæ¶ˆæ¯

```typescript
import { AmigoServerBuilder } from "@amigo/server";

const server = new AmigoServerBuilder()
  .port(8080)
  .registerMessage(MyCustomMessage)
  .build();
```

### æ³¨å†Œè¡¨ API

#### ToolRegistry

å·¥å…·æ³¨å†Œè¡¨ï¼Œç”¨äºç®¡ç†å·²æ³¨å†Œçš„å·¥å…·ã€‚

```typescript
import { ToolRegistry, RegistrationError } from "@amigo/server";

const registry = new ToolRegistry();

// æ³¨å†Œå·¥å…·
registry.register(myTool);

// è·å–å·¥å…·
const tool = registry.get("myTool");

// æ£€æŸ¥å·¥å…·æ˜¯å¦å­˜åœ¨
if (registry.has("myTool")) {
  // ...
}

// è·å–æ‰€æœ‰å·¥å…·
const allTools = registry.getAll();

// è·å–å·¥å…·æ•°é‡
console.log(`å·²æ³¨å†Œ ${registry.size} ä¸ªå·¥å…·`);
```

#### MessageRegistry

æ¶ˆæ¯æ³¨å†Œè¡¨ï¼Œç”¨äºç®¡ç†è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹ã€‚

```typescript
import { MessageRegistry } from "@amigo/server";

const registry = new MessageRegistry();

// æ³¨å†Œæ¶ˆæ¯
registry.register(myMessage);

// è·å–æ¶ˆæ¯å®šä¹‰
const message = registry.get("myCustomEvent");

// è·å–æ‰€æœ‰æ¶ˆæ¯ Schemaï¼ˆç”¨äºåˆå¹¶éªŒè¯ï¼‰
const schemas = registry.getAllSchemas();
```

### é”™è¯¯å¤„ç†

```typescript
import { ValidationError, RegistrationError } from "@amigo/server";

try {
  const server = new AmigoServerBuilder()
    .port(99999) // æ— æ•ˆç«¯å£
    .build();
} catch (error) {
  if (error instanceof ValidationError) {
    console.error("é…ç½®éªŒè¯å¤±è´¥:", error.details);
  }
}

try {
  registry.register(duplicateTool);
} catch (error) {
  if (error instanceof RegistrationError) {
    console.error("æ³¨å†Œå¤±è´¥:", error.message);
  }
}
```

### å®Œæ•´ç¤ºä¾‹

```typescript
import path from "node:path";
import dotenv from "dotenv";
import { AmigoServerBuilder, defineMessage } from "@amigo/server";
import { z } from "zod";
import { MyTool } from "./tools/myTool";

dotenv.config();

// å®šä¹‰è‡ªå®šä¹‰æ¶ˆæ¯
const AnalyticsMessage = defineMessage({
  type: "analytics",
  dataSchema: z.object({
    event: z.string(),
    properties: z.record(z.any()),
  }),
});

// é…ç½®
const PORT = Number(process.env.SERVER_PORT) || 10013;
const STORAGE_PATH = process.env.STORAGE_PATH || path.resolve(process.cwd(), "storage");

// æ„å»ºæœåŠ¡å™¨
const server = new AmigoServerBuilder()
  .port(PORT)
  .storagePath(STORAGE_PATH)
  .registerTool(MyTool)
  .registerMessage(AnalyticsMessage)
  .build();

// å¯åŠ¨
server.init();

console.log(`Amigo Server å·²å¯åŠ¨: ws://localhost:${PORT}`);
```

### å¯¼å‡ºæ¸…å•

```typescript
// ä» @amigo/server å¯¼å‡º
export {
  // æ„å»ºå™¨
  AmigoServerBuilder,
  
  // æœåŠ¡å™¨
  AmigoServer,
  type AmigoServerOptions,
  
  // é…ç½®
  ServerConfigSchema,
  type ServerConfig,
  ValidationError,
  
  // æ³¨å†Œè¡¨
  ToolRegistry,
  MessageRegistry,
  RegistrationError,
  
  // æ¶ˆæ¯å®šä¹‰
  defineMessage,
  type MessageDefinition,
  type MessageSchema,
};
```

---

## ğŸ“š å¼€å‘æŒ‡å—

### é¡¹ç›®è§„èŒƒ

#### è·¯å¾„åˆ«å

ä½¿ç”¨ `@/*` å¯¼å…¥æ¨¡å—ï¼Œä¿æŒä»£ç æ•´æ´ï¼š

```typescript
// âœ… æ¨è
import { logger } from "@/utils/logger"
import { ConversationManager } from "@/core/conversationManager"

// âŒ é¿å…
import { logger } from "../../../utils/logger"
```

#### å‘½åçº¦å®š

```typescript
// ç»„ä»¶ - PascalCase
ChatWindow.tsx
MessageRenderer.tsx

// å·¥å…·å‡½æ•° - camelCase
parseStreamingXml.ts
createWebSocketServer.ts

// ç±»å‹/æ¥å£ - PascalCase
interface ConversationState { }
type MessageType = "text" | "tool"

// å¸¸é‡ - UPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3
const DEFAULT_PORT = 10013
```

#### ä»£ç è´¨é‡

```bash
# æ ¼å¼åŒ–å’Œ Lintï¼ˆè‡ªåŠ¨ä¿®å¤ï¼‰
biome check --write .

# ä»…æ£€æŸ¥ï¼ˆä¸ä¿®å¤ï¼‰
biome check .

# ç±»å‹æ£€æŸ¥
pnpm --filter frontend tsc --noEmit
pnpm --filter server tsc --noEmit
```

### è°ƒè¯•æŠ€å·§

#### æŸ¥çœ‹ WebSocket æ¶ˆæ¯

```typescript
// å‰ç«¯ (packages/frontend/src/store/websocket.ts)
console.log("å‘é€æ¶ˆæ¯:", message)

// åç«¯ (packages/server/src/core/server/index.ts)
console.log("æ¥æ”¶æ¶ˆæ¯:", data)
```

#### æŸ¥çœ‹ LLM æµå¼è¾“å‡º

```typescript
// packages/server/src/core/conversationManager/StreamHandler.ts
console.log("LLM chunk:", chunk.content)
```

#### æŸ¥çœ‹å·¥å…·è°ƒç”¨

```typescript
// packages/server/src/core/conversationManager/ToolExecutor.ts
console.log("æ‰§è¡Œå·¥å…·:", toolName, params)
```

## ğŸ“‚ æ•°æ®å­˜å‚¨

### å­˜å‚¨ç»“æ„

```
packages/server/storage/
â”œâ”€â”€ conversations/
â”‚   â”œâ”€â”€ {conversationId}/
â”‚   â”‚   â”œâ”€â”€ metadata.json      # å¯¹è¯å…ƒæ•°æ®
â”‚   â”‚   â”œâ”€â”€ messages.jsonl     # æ¶ˆæ¯å†å²ï¼ˆæ¯è¡Œä¸€æ¡ï¼‰
â”‚   â”‚   â””â”€â”€ state.json         # å¯¹è¯çŠ¶æ€
â”‚   â””â”€â”€ ...
â””â”€â”€ tasks/
    â”œâ”€â”€ {taskId}/
    â”‚   â”œâ”€â”€ info.json          # ä»»åŠ¡ä¿¡æ¯
    â”‚   â””â”€â”€ subtasks.json      # å­ä»»åŠ¡åˆ—è¡¨
    â””â”€â”€ ...
```

### æ•°æ®æ ¼å¼

#### æ¶ˆæ¯æ ¼å¼ (messages.jsonl)

```jsonl
{"id":"msg_1","type":"user","content":"å¸®æˆ‘åˆ†æä¸€ä¸‹...","timestamp":1701234567890}
{"id":"msg_2","type":"assistant","content":"å¥½çš„ï¼Œæˆ‘æ¥åˆ†æ...","timestamp":1701234568123}
{"id":"msg_3","type":"tool_call","tool":"browser_search","params":{...},"timestamp":1701234569456}
```

#### å¯¹è¯å…ƒæ•°æ® (metadata.json)

```json
{
  "id": "conv_abc123",
  "title": "æ•°æ®åˆ†æä»»åŠ¡",
  "createdAt": 1701234567890,
  "updatedAt": 1701234789012,
  "messageCount": 15,
  "parentTaskId": null
}
```

## ğŸ”’ å®‰å…¨æ€§

### API å¯†é’¥ç®¡ç†

- âœ… ä½¿ç”¨ `.env` æ–‡ä»¶å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… `.env` å·²åŠ å…¥ `.gitignore`ï¼Œä¸ä¼šæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- âœ… ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç¯å¢ƒå˜é‡æ³¨å…¥

### WebSocket å®‰å…¨

```typescript
// å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒæ·»åŠ è®¤è¯ä¸­é—´ä»¶
server.on("upgrade", (req, socket, head) => {
  const token = req.headers["authorization"]
  if (!isValidToken(token)) {
    socket.write("HTTP/1.1 401 Unauthorized\r\n\r\n")
    socket.destroy()
    return
  }
  // ç»§ç»­ WebSocket æ¡æ‰‹
})
```

### è¾“å…¥éªŒè¯

æ‰€æœ‰å·¥å…·å‚æ•°éƒ½é€šè¿‡ Zod Schema éªŒè¯ï¼š

```typescript
// è‡ªåŠ¨éªŒè¯ï¼Œæ— æ•ˆå‚æ•°ä¼šæŠ›å‡ºé”™è¯¯
const params = YourToolParamsSchema.parse(rawInput)
```

## ğŸš¢ éƒ¨ç½²

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```dockerfile
# Dockerfile
FROM oven/bun:1 AS base
WORKDIR /app

# å®‰è£…ä¾èµ–
COPY package.json pnpm-lock.yaml pnpm-workspace.yaml ./
COPY packages/server/package.json ./packages/server/
COPY packages/types/package.json ./packages/types/
RUN bun install --frozen-lockfile

# æ„å»º
COPY . .
RUN bun run build

# è¿è¡Œ
EXPOSE 10013
CMD ["bun", "run", "packages/server/src/index.ts"]
```

```bash
# æ„å»ºé•œåƒ
docker build -t amigo:latest .

# è¿è¡Œå®¹å™¨
docker run -d \
  -p 10013:10013 \
  -e OPENAI_API_KEY=your_key \
  -v $(pwd)/storage:/app/packages/server/storage \
  amigo:latest
```

### ä¼ ç»Ÿéƒ¨ç½²

```bash
# 1. æ„å»ºå‰ç«¯
pnpm --filter frontend build

# 2. ä½¿ç”¨ Nginx æ‰˜ç®¡å‰ç«¯é™æ€æ–‡ä»¶
# /etc/nginx/sites-available/amigo
server {
  listen 80;
  server_name your-domain.com;
  
  root /var/www/amigo/frontend/dist;
  index index.html;
  
  location / {
    try_files $uri $uri/ /index.html;
  }
  
  # WebSocket ä»£ç†
  location /ws {
    proxy_pass http://localhost:10013;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
  }
}

# 3. ä½¿ç”¨ PM2 è¿è¡Œåç«¯
pm2 start packages/server/src/index.ts --interpreter bun --name amigo-server
pm2 save
pm2 startup
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ®æ–¹å¼

- ğŸ› **æŠ¥å‘Š Bug** - æäº¤ Issue æè¿°é—®é¢˜å’Œå¤ç°æ­¥éª¤
- ğŸ’¡ **åŠŸèƒ½å»ºè®®** - åˆ†äº«ä½ çš„æƒ³æ³•å’Œä½¿ç”¨åœºæ™¯
- ğŸ“ **æ”¹è¿›æ–‡æ¡£** - ä¿®æ­£é”™è¯¯æˆ–è¡¥å……è¯´æ˜
- ğŸ”§ **æäº¤ä»£ç ** - Fork é¡¹ç›®å¹¶å‘èµ· Pull Request

### å¼€å‘æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å‘èµ· Pull Request

### ä»£ç å®¡æŸ¥æ ‡å‡†

- âœ… é€šè¿‡æ‰€æœ‰ç±»å‹æ£€æŸ¥ (`tsc --noEmit`)
- âœ… é€šè¿‡ Biome æ£€æŸ¥ (`biome check .`)
- âœ… æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- âœ… ä¿æŒå‘åå…¼å®¹ï¼ˆé™¤éæ˜¯ Breaking Changeï¼‰

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [ISC License](LICENSE) å¼€æºåè®®ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [React](https://reactjs.org/) - ç”¨æˆ·ç•Œé¢åº“
- [Bun](https://bun.sh/) - é«˜æ€§èƒ½ JavaScript è¿è¡Œæ—¶
- [LangChain](https://www.langchain.com/) - LLM åº”ç”¨å¼€å‘æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - åŸå­åŒ– CSS æ¡†æ¶
- [Biome](https://biomejs.dev/) - å¿«é€Ÿçš„ä»£ç æ ¼å¼åŒ–å’Œ Lint å·¥å…·

## ğŸ“® è”ç³»æˆ‘ä»¬

- **Issues**: [GitHub Issues](https://github.com/your-org/amigo/issues)
- **Discussions**: [GitHub Discussions](https://github.com/your-org/amigo/discussions)
- **Email**: support@amigo.dev

---

<div align="center">

**[â¬† å›åˆ°é¡¶éƒ¨](#amigo)**

Made with â¤ï¸ by Amigo Team

</div>
